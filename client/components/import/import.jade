template(name="importHeaderBar")
  h1
    a.back-btn(href="{{pathFor 'home'}}")
      i.fa.fa-chevron-left
    | {{_ 'import-board-title'}}

template(name="import")
  .wrapper
    if error.get
      .warning {{_ error.get}}
    +Template.dynamic(template=currentTemplate)

template(name="importTextarea")
  form
    p: label(for='import-textarea') {{_ 'import-board-trello-instruction'}}
    textarea.js-import-json(placeholder="{{_ 'import-json-placeholder'}}" autofocus)
      | {{jsonText}}
    input.primary.wide(type="submit" value="{{_ 'import'}}")

template(name="importMapMembers")
  hr
  h2 {{_ 'import-map-members'}}
  .map-members
    p {{_ 'import-members-map'}}
    .mapping-list
      each members
        .mapping
          a.source
            div.full-name
              = fullName
            div.username
              | ({{username}})
          .wekan
            if wekan
              +userAvatar(userId=wekan._id)
            else
              a.member.add-member.js-add-members
                i.fa.fa-plus
    form
      input.primary.wide(type="submit" value="{{_ 'done'}}")

template(name="importMapMembersAddPopup")
  .select-member
    p
      | {{_ 'import-user-select'}}
    .js-map-member
      +esInput(index="users")
    ul.pop-over-list
      +esEach(index="users")
        li.item.js-member-item
          a.name.js-select-import(title="{{profile.name}} ({{username}})" data-id="{{_id}}")
            +userAvatar(userId=_id esSearch=true)
            span.full-name
              = profile.name
              | (<span class="username">{{username}}</span>)
      +ifEsIsSearching(index='users')
        +spinner
      +ifEsHasNoResults(index="users")
        .manage-member-section
          p.quiet {{_ 'no-results'}}
